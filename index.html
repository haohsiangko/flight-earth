<!DOCTYPE html>
<html>
  <head>
    <style>
    body {
      font-family: "Helvetica Neue", sans-serif;
      margin: 0;
    }
    </style>
  </head>
  <body>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script>

    var width = window.innerWidth, height = window.innerHeight;
    const center = [width/2, height/2];

    var projection = d3.geoOrthographic()
        .scale(width / 4.1)
        .translate([width / 2, height / 2])
        .clipAngle(90 + 1e-6)
        .precision(1)
        .rotate([0, 0]); 

    var path = d3.geoPath()
        .projection(projection);



    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);






    var g = svg.append("g");

    var graticule = d3.geoGraticule()
        .step([15, 15]);

    g.append("path")
        .datum(graticule)
        .attr("class", "graticule")
        .attr("d", path)
        .style("fill", "#fff")
        .style("stroke", "#ccc");

    var dials = [{
      name: "λ",
      scale: d3.scaleLinear().domain([40, height / 2 - 40]).range([-180, 180]),
      rscale: d3.scaleLinear().domain([-180, 180]).range([40, height / 2 - 40])
    },{
      name: "φ",
      scale: d3.scaleLinear().domain([40, height / 2 - 40]).range([90, -90]),
      rscale: d3.scaleLinear().domain([90, -90]).range([40, height / 2 - 40])
    },{
      name: "γ",
      scale: d3.scaleLinear().domain([40, height / 2 - 40]).range([180, -180]),
      rscale: d3.scaleLinear().domain([180, -180]).range([40, height / 2 - 40])
    }];

    svg.selectAll(".dial-rect")
        .data(dials)
      .enter().append("rect")
        .attr("class", "dial-rect")
        .attr("x", function(d,i){ return 45 * (i + 1); })
        .attr("y", 40)
        .attr("width", 20)
        .attr("height", height / 2 - 80)
        .attr("rx", 10)
        .attr("ry", 10)
        .style("stroke", "#ccc")
        .style("fill", "#3a403d");

    svg.selectAll(".dial-text")
        .data(dials)
      .enter().append("text")
        .attr("class", "dial-text")
        .attr("x", function(d,i) { return 45 * (i + 1); })
        .attr("y", 15)
        .attr("dx", 10)
        .attr("text-anchor", "middle")
        .style("fill", "#3a403d")
        .text(function(d){ return d.name; });

    svg.selectAll(".dial-circle")
        .data(dials)
      .enter().append("circle")
        .attr("class", function(d){ return "dial-circle dial-" + d.name; })
        .attr("cx", function(d,i){ return 45 * (i + 1) + 10; })
        .attr("cy", function(d){ return d.rscale(0); })
        .attr("r", 20)
        .style("stroke", "#aaa")
        .style("fill", "#ccc")
        .style("cursor", "ns-resize")
        .call(d3.drag().on("drag", dragged));

    svg.selectAll(".dial-circle-text")
        .data(dials)
      .enter().append("text")
        .attr("class", function(d) { return "dial-circle-text dial-" + d.name; })
        .attr("x", function(d,i){ return 45 * (i + 1) + 10; })
        .attr("y", function(d){ return d.rscale(0) + 5; })
        .attr("text-anchor", "middle")
        .style("font-size", ".7em")
        .style("cursor", "ns-resize")
        .text("0")
        .call(d3.drag().on("drag", dragged));





    function dragged(d){

      var y = d3.mouse(this)[1];
      y < 40 ? y = 40 : y = y;
      y > height / 2 - 40 ? y = height / 2 - 40 : y = y;

      d3.select(".dial-circle.dial-" + d.name)
          .attr("cy", y);

      d3.select(".dial-circle-text.dial-" + d.name)
          .attr("y", y + 5)
          .text(Math.round(d.scale(y)));

      projection.rotate([dials[0].scale(d3.select(".dial-λ").attr("cy")), 
                         dials[1].scale(d3.select(".dial-φ").attr("cy")), dials[2].scale(d3.select(".dial-γ").attr("cy"))]);
  
        
      g.selectAll("path").attr("d", path);
          g.selectAll("path").attr("d", path);

        
        draw();
    }

//    var c = d3.scaleOrdinal(d3.schemeCategory20);

draw();


function draw(){
    
    
    d3.selectAll(".myPoint").remove();

    
    var points = [

[103.98362,1.346706],
[103.984024,1.346535],
[103.985413,1.334919],
[103.983513,1.329643],
[103.985359,1.32966],
[103.995117,1.352762],
[103.998955,1.362122],
[104.002357,1.370773],
[104.006432,1.379343],
[104.009415,1.382648],
[104.015762,1.386429],
[104.023445,1.388443],
[104.031723,1.38856],
[104.040482,1.388048],
[104.04686,1.387299],
[104.053421,1.386475],
[104.062737,1.385239],
[104.069885,1.384138],
[104.076561,1.383067],
[104.083771,1.381851],
[104.090897,1.380707],
[104.105453,1.378319],
[104.112404,1.37709],
[104.119339,1.3759],
[104.132744,1.373566],
[104.146599,1.371289],
[104.160522,1.368915],
[104.173943,1.366699],
[104.188034,1.364306],
[104.202103,1.362025],
[104.21669,1.359931],
[104.230942,1.357696],
[104.245262,1.355118],
[104.26049,1.3526],
[104.276497,1.350082],
[104.297539,1.346832],
[104.314522,1.344196],
[104.33255,1.341293],
[104.351173,1.33833],
[104.370026,1.335251],
[104.389626,1.332139],
[104.410103,1.330032],
[104.425377,1.329904],
[104.435844,1.330091],
[104.456116,1.33051],
[104.47728,1.330032],
[104.498161,1.328647],
[104.519409,1.327148],
[104.539314,1.325715],
[104.561211,1.324173],
[104.619637,1.320282],
[104.679016,1.316916],
[104.739418,1.313873],
[104.800194,1.310678],
[104.857208,1.307652],
[104.919052,1.311423],
[104.982368,1.318726],
[105.045631,1.334373],
[105.108482,1.352509],
[105.222931,1.385581],
[105.3452,1.421677],
[105.462265,1.454245],
[105.589134,1.489059],
[105.616692,1.500183],
[105.627449,1.505997],
[105.636292,1.511581],
[105.649879,1.5217],
[105.658783,1.529613],
[105.671478,1.543253],
[105.679008,1.553029],
[105.686584,1.563876],
[105.698067,1.580566],
[105.777161,1.688782],
[106.161171,2.219604],
[106.244965,2.335281],
[106.326706,2.448257],
[106.355057,2.487396],
[106.532959,2.802538],
[106.601784,2.935501],
[106.666306,3.060059],
[106.706276,3.137295],
[106.80191,3.321945],
[106.852608,3.419769],
[106.923737,3.555267],
[116.20919,15.572296],
[116.86216,16.156094],
[116.971581,16.253357],
[117.079857,16.349487],
[117.09861,16.366184],
[117.319176,16.561518],
[117.448853,16.676083],
[117.556793,16.771225],
[117.657837,16.860214],
[117.808617,16.992691],
[117.918709,17.089279],
[118.025925,17.183128],
[118.133965,17.277603],
[118.241852,17.371765],
[118.386909,17.498102],
[118.498833,17.595396],
[118.606293,17.688686],
[118.718987,17.786316],
[118.832123,17.88414],
[118.940063,17.977341],
[119.053101,18.074745],
[119.160362,18.166992],
[119.274055,18.264679],
[119.383034,18.358109],
[119.496742,18.455448],
[119.606506,18.549204],
[119.720963,18.646778],
[119.831024,18.74044],
[119.940987,18.833918],
[120.056778,18.932053],
[120.167511,19.025806],
[120.277718,19.118864],
[120.394806,19.217606],
[120.511627,19.316013],
[120.62429,19.410645],
[120.737045,19.505081],
[120.854759,19.603638],
[120.967667,19.697891],
[121.080025,19.791592],
[121.199158,19.890656],
[121.312531,19.984783],
[121.431343,20.083237],
[121.545479,20.177582],
[121.6651,20.276276],
[121.780052,20.370934],
[121.893654,20.464325],
[122.014359,20.563427],
[122.187248,20.704666],
[122.303925,20.799866],
[122.427818,20.900757],
[122.441978,20.912289],
[122.593994,21.06419],
[122.676949,21.183084],
[122.759552,21.301046],
[122.842728,21.420227],
[122.926537,21.539999],
[123.011566,21.661331],
[123.096466,21.782135],
[123.181305,21.902689],
[123.269646,22.022049],
[123.280434,22.032894],
[123.297562,22.048737],
[123.41095,22.155466],
[123.523964,22.262815],
[123.641968,22.37431],
[123.760376,22.486034],
[123.877869,22.59655],
[123.978729,22.691282],
[124.144463,22.846619],
[124.258629,22.953232],
[124.332573,23.022217],
[124.497475,23.175659],
[124.616821,23.286301],
[124.681091,23.345854],
[124.777122,23.434584],
[124.789406,23.445923],
[124.806885,23.462082],
[124.823166,23.477051],
[124.93586,23.580872],
[125.058357,23.693506],
[125.18087,23.805771],
[125.302025,23.916538],
[125.417076,24.021469],
[125.512169,24.108007],
[125.632935,24.217667],
[125.651299,24.234329],
[125.661827,24.243847],
[125.779259,24.350126],
[125.898033,24.457306],
[126.021629,24.568596],
[126.13958,24.674561],
[126.265358,24.78717],
[126.385735,24.894693],
[126.511299,25.006512],
[126.631165,25.112978],
[126.758171,25.225525],
[126.879478,25.332687],
[127.002159,25.440765],
[127.123161,25.547058],
[127.224892,25.642601],
[127.235054,25.655731],
[127.243706,25.667788],
[127.335899,25.803951],
[127.423737,25.93364],
[127.511604,26.063202],
[127.599411,26.193329],
[127.691292,26.330645],
[127.778076,26.460804],
[127.862206,26.579498],
[127.874207,26.591616],
[127.886246,26.602661],
[127.906479,26.619175],
[127.920105,26.629557],
[128.054901,26.733553],
[128.190582,26.83676],
[128.333939,26.945206],
[128.471588,27.049038],
[128.609268,27.152481],
[128.747192,27.255869],
[128.885483,27.359207],
[129.025497,27.463493],
[129.172058,27.572296],
[129.312622,27.676144],
[129.452271,27.77916],
[129.573593,27.868311],
[129.789581,28.026352],
[129.929703,28.128492],
[130.070801,28.231047],
[130.219284,28.338488],
[130.40744,28.474188],
[130.545883,28.573654],
[130.705795,28.688049],
[130.773224,28.736206],
[130.985031,28.886856],
[131.145172,29.000244],
[131.292542,29.104227],
[131.44487,29.211365],
[131.546417,29.282475],
[131.781219,29.446335],
[131.863571,29.503597],
[132.643646,30.053558],
[132.735229,30.118134],
[132.953964,30.271591],
[133.055588,30.342562],
[133.228287,30.462845],
[133.448181,30.615189],
[133.573975,30.701992],
[134.912872,31.593794],
[135.08757,31.700455],
[135.273666,31.813431],
[135.345505,31.856953],
[135.614243,32.018921],
[135.774323,32.114777],
[135.926529,32.205688],
[136.081314,32.297615],
[136.098083,32.307587],
[136.325333,32.441849],
[136.479202,32.532349],
[136.642181,32.627838],
[136.804947,32.722733],
[136.960892,32.813278],
[136.985718,32.82766],
[137.221268,32.963562],
[137.391159,33.061119],
[137.555435,33.154922],
[137.726807,33.252457],
[137.883347,33.341133],
[138.055939,33.438427],
[138.214615,33.527386],
[138.373032,33.615929],
[138.547211,33.712852],
[138.7052,33.800262],
[138.864563,33.888168],
[139.039368,33.984112],
[139.212585,34.07872],
[139.388702,34.174416],
[139.552124,34.262821],
[139.726303,34.356537],
[139.889893,34.444141],
[140.051758,34.53054],
[140.223999,34.621922],
[140.386215,34.707596],
[140.547653,34.792557],
[140.700302,34.872421],
[140.883759,34.969437],
[140.918762,34.993179],
[140.980148,35.041946],
[141.17775,35.194469],
[141.313934,35.299484],
[141.449799,35.403767],
[141.591858,35.512142],
[141.736954,35.622471],
[141.886078,35.735409],
[142.037323,35.849411],
[142.175217,35.952896],
[142.290405,36.039093],
[142.505585,36.198929],
[142.611893,36.277649],
[142.738998,36.371403],
[142.940994,36.519608],
[143.093704,36.631023],
[143.244614,36.740616],
[143.353394,36.819351],
[143.471039,36.904175],
[143.665054,37.04343],
[143.839096,37.167587],
[143.99324,37.277023],
[144.240997,37.451836],
[144.340714,37.521835],
[144.522171,37.648544],
[144.74353,37.802307],
[144.900208,37.910477],
[145.016495,37.990356],
[147.051697,39.604408],
[161.411209,48.669674],
[163.255096,49.493149],
[165.202591,50.292542],
[165.520401,50.413048],
[167.19426,51.06448],
[168.922668,51.700378],
[168.982422,51.721619],
[169.14444,51.778751],
[169.334198,51.845306],
[169.676285,51.963913],
[169.915253,52.045822],
[170.147781,52.124821],
[170.281372,52.169861],
[170.604095,52.285538],
[170.808762,52.377972],
[171.029587,52.475918],
[171.242142,52.569626],
[171.452789,52.661728],
[171.661148,52.75209],
[171.879349,52.845886],
[172.097321,52.938858],
[172.314362,53.03054],
[172.535355,53.123085],
[172.754593,53.214188],
[172.975266,53.305115],
[173.194611,53.394627],
[173.4133,53.483028],
[173.635284,53.568218],
[173.859848,53.653828],
[174.083466,53.738506],
[174.302887,53.820786],
[174.438019,53.87114],
[174.765961,53.992126],
[178.616669,55.299999],
[179.883331,55.683334],
[-177.800003,56.333332],
[-176.300003,56.716667],
[-175.449249,56.930462],
[-168.219452,58.470409],
[-167.960907,58.519966],
[-167.634933,58.584217],
[-167.424393,58.624577],
[-167.1651,58.673378],
[-166.909653,58.720181],
[-166.652863,58.768311],
[-166.371536,58.820728],
[-166.136353,58.864323],
[-165.856827,58.90847],
[-165.593643,58.95211],
[-165.330582,58.999218],
[-165.06398,59.048203],
[-164.811569,59.08778],
[-164.539368,59.133556],
[-164.230576,59.179428],
[-163.97789,59.220451],
[-163.729752,59.26387],
[-163.298401,59.337616],
[-162.950043,59.390854],
[-162.562592,59.457184],
[-162.415558,59.481583],
[-162.085693,59.535645],
[-161.830994,59.576653],
[-161.603226,59.606911],
[-161.356598,59.646725],
[-161.103073,59.682964],
[-160.798111,59.723911],
[-160.557281,59.763268],
[-160.303253,59.800491],
[-159.81308,59.881531],
[-159.53183,59.921173],
[-159.260071,59.958771],
[-158.987366,59.995872],
[-158.712814,60.032555],
[-158.430908,60.069489],
[-158.148392,60.105923],
[-157.865204,60.141769],
[-157.587204,60.176216],
[-157.304703,60.210526],
[-157.021439,60.244308],
[-156.69603,60.282261],
[-156.596085,60.293839],
[-156.220184,60.365498],
[-155.951324,60.423176],
[-155.687057,60.479645],
[-155.429764,60.533829],
[-155.169189,60.588089],
[-154.908844,60.641464],
[-154.629333,60.698158],
[-154.368607,60.750183],
[-154.102875,60.802578],
[-153.816345,60.858391],
[-153.557709,60.907883],
[-153.282822,60.959923],
[-153.01944,61.009174],
[-152.748505,61.059082],
[-152.478851,61.107971],
[-152.212021,61.155769],
[-151.944061,61.203049],
[-151.677444,61.249336],
[-151.402786,61.296494],
[-151.127319,61.343002],
[-150.856216,61.388111],
[-150.583694,61.4328],
[-150.30864,61.477211],
[-150.034592,61.520832],
[-149.765015,61.563007],
[-149.458817,61.610165],
[-149.178833,61.652618],
[-148.900055,61.694138],
[-148.620911,61.735016],
[-148.338821,61.775703],
[-148.061218,61.815041],
[-147.782898,61.853817],
[-147.504272,61.891991],
[-147.229446,61.92897],
[-146.942444,61.966988],
[-146.658432,62.003857],
[-146.376343,62.039795],
[-146.090897,62.075546],
[-145.803421,62.110832],
[-145.508316,62.146027],
[-145.21373,62.161926],
[-144.913361,62.172703],
[-144.620667,62.182297],
[-144.32338,62.191368],
[-144.021042,62.199936],
[-143.735825,62.207428],
[-143.431396,62.214752],
[-143.134872,62.221298],
[-142.824905,62.227402],
[-142.46846,62.233612],
[-142.282135,62.236431],
[-141.855881,62.242035],
[-141.555481,62.245239],
[-141.26506,62.247665],
[-140.969345,62.249496],
[-140.678986,62.250816],
[-140.380142,62.251511],
[-140.084335,62.251602],
[-139.80072,62.251007],
[-139.477768,62.249699],
[-139.183258,62.247883],
[-138.887634,62.245377],
[-138.586395,62.242157],
[-138.286819,62.238338],
[-137.987167,62.233841],
[-137.871979,62.231964],
[-137.347,62.222168],
[-137.055359,62.215851],
[-136.763412,62.20892],
[-136.472672,62.20134],
[-136.179657,62.193138],
[-135.89061,62.184402],
[-135.600449,62.175076],
[-135.31427,62.165207],
[-135.024612,62.154686],
[-134.727783,62.143204],
[-134.441666,62.131622],
[-134.154648,62.119308],
[-133.865067,62.106262],
[-133.575409,62.092621],
[-133.285629,62.078339],
[-123.687035,61.243473],
[-123.404617,61.207764],
[-123.127602,61.172104],
[-122.844948,61.135006],
[-122.567955,61.097996],
[-122.278717,61.058716],
[-122.004402,61.020767],
[-121.71611,60.980164],
[-121.437767,60.940277],
[-121.16684,60.900894],
[-120.894928,60.86058],
[-120.613495,60.818253],
[-120.335243,60.775726],
[-120.06134,60.733109],
[-119.78894,60.690105],
[-119.515244,60.646179],
[-119.244232,60.602123],
[-118.973106,60.557339],
[-118.701401,60.511642],
[-118.424576,60.464512],
[-118.145645,60.41629],
[-117.871841,60.368225],
[-117.595207,60.318943],
[-117.328873,60.270767],
[-117.05825,60.221233],
[-116.790062,60.171421],
[-116.524025,60.121307],
[-116.257523,60.070354],
[-115.988846,60.012352],
[-115.718079,59.952255],
[-115.451385,59.892746],
[-115.188995,59.83345],
[-114.926559,59.773399],
[-114.661743,59.712021],
[-114.40274,59.651276],
[-114.14566,59.590256],
[-113.875473,59.525417],
[-113.582703,59.454117],
[-113.294037,59.382935],
[-113.014557,59.313091],
[-112.757904,59.248169],
[-112.506248,59.183861],
[-112.238983,59.114639],
[-111.973297,59.045059],
[-111.790649,58.996719],
[-111.455544,58.907455],
[-111.179443,58.833012],
[-110.923737,58.761879],
[-110.601563,58.672394],
[-110.351807,58.602097],
[-110.104271,58.531723],
[-109.855659,58.46022],
[-109.604279,58.387074],
[-109.353058,58.313194],
[-109.09726,58.237221],
[-108.84465,58.161255],
[-108.596466,58.08588],
[-108.351105,58.010605],
[-108.104584,57.934158],
[-107.863312,57.858566],
[-107.615387,57.779987],
[-107.376167,57.703445],
[-107.149391,57.63018],
[-106.906586,57.550964],
[-106.677597,57.475487],
[-106.4431,57.39743],
[-106.207848,57.318329],
[-106.079109,57.274708],
[-105.753418,57.163261],
[-105.517334,57.081619],
[-105.294739,57.003773],
[-105.059769,56.920898],
[-104.831284,56.839554],
[-104.601685,56.757019],
[-104.37149,56.673431],
[-104.140862,56.588902],
[-103.918045,56.50655],
[-103.692795,56.42244],
[-103.457756,56.333817],
[-103.232864,56.248325],
[-103.009064,56.162338],
[-102.791496,56.078705],
[-102.567024,55.992279],
[-102.34803,55.907001],
[-102.127823,55.820526],
[-101.902916,55.731361],
[-101.681984,55.642914],
[-101.469307,55.557129],
[-101.259903,55.471802],
[-101.043602,55.383087],
[-100.826859,55.293259],
[-100.607552,55.201595],
[-100.389236,55.109516],
[-100.176651,55.019073],
[-99.961769,54.926926],
[-99.754608,54.83728],
[-99.49968,54.725834],
[-99.150009,54.570293],
[-98.941658,54.478043],
[-98.734695,54.384705],
[-98.641632,54.342499],
[-98.35598,54.202702],
[-98.187706,54.120461],
[-98.005989,54.039429],
[-97.815956,53.958065],
[-97.616348,53.866447],
[-97.221649,53.695499],
[-97.002975,53.604389],
[-96.782829,53.511669],
[-96.691849,53.464645],
[-96.410263,53.353584],
[-96.168823,53.225594],
[-96.003784,53.149063],
[-95.876999,53.090103],
[-95.597763,52.958862],
[-95.404053,52.866989],
[-95.2108,52.774658],
[-95.016098,52.680954],
[-94.933701,52.640991],
[-94.641098,52.49826],
[-94.448204,52.403343],
[-94.250061,52.304977],
[-94.060287,52.210098],
[-93.869858,52.114151],
[-93.680107,52.01775],
[-93.491531,51.921341],
[-93.304955,51.825165],
[-93.116333,51.727295],
[-92.929306,51.629459],
[-92.741829,51.530731],
[-92.55188,51.42989],
[-92.36087,51.327713],
[-92.176628,51.22847],
[-91.990677,51.127533],
[-91.801384,51.024078],
[-91.616402,50.92218],
[-91.434097,50.82103],
[-91.252136,50.719456],
[-91.069069,50.61644],
[-90.889297,50.514484],
[-90.7071,50.410538],
[-90.528381,50.307747],
[-90.353714,50.206776],
[-90.176743,50.103569],
[-90.002022,50.001068],
[-89.82357,49.899582],
[-89.649307,49.800613],
[-89.468178,49.696564],
[-89.290077,49.593613],
[-89.116714,49.49271],
[-88.939026,49.388573],
[-88.761993,49.284119],
[-88.586922,49.180115],
[-88.412193,49.075562],
[-88.236336,48.969696],
[-88.061127,48.86348],
[-87.886543,48.756958],
[-87.710403,48.648605],
[-87.635124,48.602165],
[-87.384529,48.446449],
[-87.213837,48.339523],
[-87.077278,48.25349],
[-86.83918,48.102287],
[-86.67485,47.997208],
[-86.511772,47.892151],
[-86.344231,47.783707],
[-86.180191,47.676727],
[-86.016357,47.569244],
[-85.852524,47.460983],
[-85.687111,47.35112],
[-85.52462,47.24242],
[-85.360474,47.132034],
[-85.199959,47.023392],
[-85.038368,46.913315],
[-84.878723,46.803852],
[-84.718803,46.693569],
[-84.558609,46.582405],
[-84.406517,46.476219],
[-84.231979,46.371323],
[-84.03923,46.276836],
[-83.857101,46.178833],
[-83.672218,46.080338],
[-83.488678,45.982204],
[-83.303635,45.882248],
[-83.120842,45.78315],
[-82.940079,45.684402],
[-82.757599,45.583969],
[-82.575272,45.483124],
[-82.397789,45.382965],
[-82.22731,45.273354],
[-82.059105,45.16539],
[-81.85759,45.034775],
[-81.697685,44.930546],
[-81.532875,44.822525],
[-81.3741,44.717789],
[-81.213417,44.611149],
[-81.051369,44.503193],
[-80.891747,44.396255],
[-80.724594,44.283516],
[-80.650047,44.238281],
[-80.622032,44.226303],
[-80.425415,44.154892],
[-80.218575,44.07687],
[-80.016701,44.000851],
[-79.808968,43.921829],
[-79.603989,43.843224],
[-79.412376,43.769165],
[-79.206779,43.689228],
[-79.009552,43.611954],
[-78.804276,43.530998],
[-78.608963,43.4534],
[-78.414658,43.375652],
[-78.213585,43.294693],
[-78.024445,43.217979],
[-77.818909,43.134018],
[-77.618347,43.051529],
[-77.430168,42.973618],
[-77.228134,42.88937],
[-77.037285,42.80928],
[-76.834946,42.723816],
[-76.642563,42.642059],
[-76.450363,42.559891],
[-76.256355,42.475937],
[-76.210304,42.456013],
[-75.936378,42.337006],
[-75.755905,42.257935],
[-75.565651,42.173996],
[-75.398232,42.099747],
[-75.234695,42.032387],
[-75.070763,41.97052],
[-74.917145,41.912247],
[-74.831711,41.878674],
[-74.817596,41.870712],
[-74.800224,41.857681],
[-74.791283,41.849018],
[-74.7771,41.832867],
[-74.763817,41.817455],
[-74.713226,41.763687],
[-74.694382,41.744091],
[-74.676369,41.725235],
[-74.659065,41.707035],
[-74.641426,41.688309],
[-74.624062,41.669838],
[-74.607071,41.651775],
[-74.591423,41.635017],
[-74.575325,41.61784],
[-74.560059,41.601501],
[-74.545296,41.585724],
[-74.52652,41.565468],
[-74.512398,41.550201],
[-74.498604,41.535416],
[-74.486855,41.522736],
[-74.47226,41.506897],
[-74.458878,41.492382],
[-74.446297,41.478603],
[-74.432625,41.463959],
[-74.419662,41.450066],
[-74.406906,41.436127],
[-74.401283,41.428757],
[-74.397476,41.421249],
[-74.395546,41.41333],
[-74.398415,41.387146],
[-74.400726,41.376186],
[-74.404297,41.358353],
[-74.407089,41.343277],
[-74.409592,41.328705],
[-74.411964,41.313576],
[-74.414146,41.299049],
[-74.416443,41.284012],
[-74.41864,41.269272],
[-74.420891,41.254684],
[-74.423462,41.239838],
[-74.426392,41.225281],
[-74.429688,41.210835],
[-74.433434,41.196262],
[-74.4375,41.181381],
[-74.44165,41.167007],
[-74.444984,41.155807],
[-74.447266,41.148285],
[-74.449402,41.141235],
[-74.45166,41.13382],
[-74.453918,41.126633],
[-74.456284,41.119312],
[-74.46109,41.104462],
[-74.463501,41.097336],
[-74.46714,41.08654],
[-74.472168,41.07193],
[-74.475754,41.061588],
[-74.478317,41.054234],
[-74.483459,41.039795],
[-74.486206,41.03215],
[-74.490112,41.021366],
[-74.492676,41.014343],
[-74.495605,41.006516],
[-74.498169,40.999512],
[-74.503601,40.984589],
[-74.506104,40.977722],
[-74.508789,40.970352],
[-74.511414,40.963257],
[-74.516769,40.948746],
[-74.519287,40.941925],
[-74.523987,40.927597],
[-74.524658,40.919998],
[-74.523865,40.912491],
[-74.522133,40.905403],
[-74.519043,40.894592],
[-74.516052,40.88443],
[-74.514099,40.877701],
[-74.510338,40.864437],
[-74.506653,40.851311],
[-74.503174,40.838516],
[-74.501404,40.83197],
[-74.498917,40.822681],
[-74.496979,40.815559],
[-74.493736,40.803314],
[-74.490112,40.790085],
[-74.486572,40.777451],
[-74.484863,40.771088],
[-74.4823,40.761887],
[-74.480438,40.755367],
[-74.478752,40.749176],
[-74.476074,40.739777],
[-74.472633,40.727669],
[-74.470703,40.721012],
[-74.468452,40.714588],
[-74.465454,40.708969],
[-74.461899,40.703648],
[-74.457642,40.69812],
[-74.451721,40.690659],
[-74.443985,40.68079],
[-74.440002,40.675735],
[-74.436035,40.670654],
[-74.432251,40.665848],
[-74.428223,40.660767],
[-74.418701,40.648762],
[-74.413025,40.641678],
[-74.409027,40.636612],
[-74.401611,40.626984],
[-74.396294,40.620041],
[-74.392426,40.614872],
[-74.387207,40.607941],
[-74.381836,40.600891],
[-74.378006,40.595833],
[-74.37101,40.586895],
[-74.365845,40.580338],
[-74.361633,40.576172],
[-74.356651,40.573021],
[-74.349792,40.570313],
[-74.346169,40.569206],
[-74.337051,40.566784],
[-74.328613,40.564499],
[-74.319763,40.561981],
[-74.314705,40.560501],
[-74.307678,40.558456],
[-74.2976,40.555611],
[-74.28717,40.554245],
[-74.273445,40.557938],
[-74.251289,40.5686],
[-74.244263,40.574112],
[-74.241608,40.577118],
[-74.237122,40.583725],
[-74.231812,40.592808],
[-74.228394,40.598328],
[-74.224792,40.603958],
[-74.221436,40.609085],
[-74.217766,40.614964],
[-74.214417,40.620209],
[-74.211212,40.625301],
[-74.208069,40.630234],
[-74.205841,40.633678],
[-74.202538,40.638893],
[-74.19458,40.651474],
[-74.191772,40.655869],
[-74.188362,40.66124],
[-74.181885,40.671432],
[-74.179626,40.675018],
[-74.167953,40.694698],
[-74.169197,40.695095],
[-74.169907,40.694893],
[-74.170059,40.694595],
[-74.170761,40.693485],
[-74.171181,40.692814],
[-74.171921,40.691654],
[-74.17215,40.691288],
[-74.172363,40.690968],
[-74.172539,40.69067],
[-74.172852,40.690182],
[-74.173241,40.689564],
[-74.174438,40.688244],
[-74.175613,40.68869],
[-74.175552,40.689087],
[-74.175331,40.689308],
[-74.175217,40.689514],
        
        
];
    
    //加入點
    var circles = svg.selectAll(".myPoint").data(points);
    
    
    circles.enter().append("circle").attr("class", "myPoint")
                     .attr("cx", d => projection(d)[0])
                     .attr("cy", d => projection(d)[1])
                     .attr("r", 3)
                     .style("fill", 
                        d =>{
                         
                        const coordinate = d;
                        gdistance = d3.geoDistance(coordinate, projection.invert(center));
                         
                        return gdistance > 1.57 ? 'rgba(0,0,256,0)' : 'blue';
                        
                         
                     }
                           
                           );
    
    






    d3.json("countries.json", function(error, data){

        g.selectAll(".subunit")
          .data(topojson.feature(data, data.objects.polygons).features)
        .enter().append("path")
          .attr("class", "subunit")
          .attr("d", path)
          .style("stroke", "#555")
          .style("stroke-width", "1px")
          .style("fill", function(d,i){ return "#aaa"; })//c(i)
          .style("opacity", ".6");


        
   

    });



    
}

     




    </script>

  </body>
</html>